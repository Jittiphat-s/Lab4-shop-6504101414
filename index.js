var product = [{
    id: 1,
    img: 'https://scontent.fcnx4-1.fna.fbcdn.net/v/t39.30808-6/313427684_194734163078430_3788031055796561498_n.jpg?_nc_cat=100&cb=99be929b-3346023f&ccb=1-7&_nc_sid=dd63ad&_nc_ohc=X2QGKU5z0XUAX9K4sY6&_nc_ht=scontent.fcnx4-1.fna&oh=00_AfAGma_PuZ0eo2Npi371NrEjrkQHqCDamj43SLms44hgiQ&oe=64DE6044',
    name: 'SKIN THERAPY LOTION',
    price: 149,
    descripion: '‡πÇ‡∏•‡∏ä‡∏±‡πà‡∏ô‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÇ‡∏£‡∏Ñ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡∏£‡∏á‡∏à‡∏∏‡∏î (‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡πå) ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏Å‡∏≤‡∏£‡∏±‡∏ô‡∏ï‡∏µ‡πÅ‡∏ú‡∏•‡∏´‡∏≤‡∏¢‡πÑ‡∏ß‡∏°‡∏≤‡∏Å üõÅ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£?üê±üê∂üê∞‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏°‡∏ß,‡∏™‡∏∏‡∏ô‡∏±‡∏Ç ‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÄ‡∏•‡πá‡∏Å‡∏Å‡πá‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‡∏ô‡πâ‡∏≠‡∏á‡πÅ‡∏°‡∏ß‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏µ‡∏¢‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô24 ‡∏ä‡∏°.',
    type: '‡∏¢‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤'
}, {
    id: 2,
    img: 'https://scontent.fcnx4-1.fna.fbcdn.net/v/t39.30808-6/315008870_197406639477849_3706228433028503254_n.jpg?_nc_cat=108&cb=99be929b-3346023f&ccb=1-7&_nc_sid=dd63ad&_nc_ohc=H1ny3pNnQOkAX_TpuDU&_nc_ht=scontent.fcnx4-1.fna&oh=00_AfBCTYQ1VqzaC-gWmTcBofQVfGqpIRC9ZxX59P2H_niEmQ&oe=64DF6C0C',
    name: '‡∏Ñ‡∏¥‡πÄ‡∏£‡∏≠‡∏¥ ‡πÄ‡∏ä‡πá‡∏î‡∏ï‡∏≤+‡∏´‡∏π‡πÅ‡∏°‡∏ß',
    price: 99,
    descripion:'* ‡πÄ‡∏ä‡πá‡∏î‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡∏µ‡πâ‡∏ï‡∏≤‡∏´‡∏•‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡πÜ ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏•‡∏µ‡πÅ‡∏ú‡πà‡∏ô‡πÅ‡∏£‡∏Å * ‡πÄ‡∏ä‡πá‡∏î‡∏Ñ‡∏£‡∏≤‡∏ö‡πÑ‡∏£‡∏´‡∏π‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏π‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏´‡∏°‡∏î‡∏à‡∏î ‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏à‡∏£‡∏¥‡∏á * ‡∏•‡∏î‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏ö‡∏ô‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏´‡∏π‡πÑ‡∏î‡πâ* ‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÅ‡∏ö‡∏Ñ‡∏ó‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡πÉ‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏°‡∏ß‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ 100%',
    type: '‡∏¢‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤'
}, {
    id: 3,
    img: 'https://scontent.fcnx4-1.fna.fbcdn.net/v/t39.30808-6/275805020_137794545425166_253513943894333362_n.jpg?_nc_cat=110&cb=99be929b-3346023f&ccb=1-7&_nc_sid=dd63ad&_nc_ohc=0BEHtU-U11YAX9FEF2G&_nc_ht=scontent.fcnx4-1.fna&oh=00_AfDADXNaY0TtJF2IhypZa4rkT66ydynoBAHz7GsZnwHKqw&oe=64DF29A0',
    name: '‡∏ñ‡∏∏‡∏á‡πÄ‡∏≠‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå',
    price: 99,
    descripion:'‡∏ñ‡∏∏‡∏á‡πÄ‡∏≠‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå ‡∏°‡∏µ 3 ‡∏™‡∏µ‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏ü‡πâ‡∏≤üíô ‡∏™‡πâ‡∏°üß° ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏áüíõ ‡∏Ñ‡πà‡∏∞',
    type: '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå'
}, {
    id: 4,
    img: 'https://scontent.fcnx4-1.fna.fbcdn.net/v/t39.30808-6/275377533_136138048924149_4692721888511227033_n.jpg?_nc_cat=107&cb=99be929b-3346023f&ccb=1-7&_nc_sid=dd63ad&_nc_ohc=bBeJ2cie_qsAX81ZofH&_nc_ht=scontent.fcnx4-1.fna&oh=00_AfD_A0AYBLxFCMnBw8wpiMmHHYU0uclMZm7zsepvtu2xQg&oe=64DF56AA',
    name: '‡∏™‡πÄ‡∏õ‡∏£‡∏¢‡πå‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏´‡πá‡∏ö+‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏Ç‡∏ô‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡∏ß',
    price: 319 ,
    descripion:'- ‡∏ú‡∏•‡∏¥‡∏ï‡∏à‡∏≤‡∏Å‡∏≠‡∏≠‡πÅ‡∏Å‡∏ô‡∏¥‡∏Ñ 100% ‡πÑ‡∏°‡πà‡∏Å‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ   - ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏µ‡∏¢‡∏Ç‡∏ô‡πÑ‡∏î‡πâ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢- ‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏£‡∏™‡∏Å‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡∏•‡∏°‡∏≠‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏ô‡∏ô‡∏∏‡πà‡∏° ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á  ‡∏°‡∏≤‡∏Å‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô- ‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÅ‡∏ú‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏´‡πá‡∏ö‡∏´‡∏°‡∏±‡∏î‡∏™‡∏°‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß ‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏Å‡∏±‡∏î‡∏≠‡∏±‡∏•‡∏°‡∏≠‡∏ô‡∏î‡πå- ‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡∏ß‡πà‡∏≤‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£ ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏ô‡∏¥‡∏î‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ ‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏´‡πá‡∏ö‡∏´‡∏°‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á- ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç ‡πÅ‡∏°‡∏ß ‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢ ‡∏´‡∏ô‡∏π  ‡∏ä‡∏π‡∏Å‡∏≤‡∏£‡πå ‡πÑ‡∏Å‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå - ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡πá‡∏Å ‡∏Ñ‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß ',
    type: '‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå'
}];

$(document).ready(() =>{
    var html = '';
    for (let i = 0; i < product.length; i++) {
        html += `<div onclick="openproductdeteil(${i})" class="product-item ${product[i].type}">
                    <img class="product-img" src="${product[i].img}" alt="">
                    <p stlye="font-size: 1.2vw;">${product[i].name}</p>
                    <p stlye="font-size: .9vw;">${product[i].price}‡∏ø</p>
                </div>`;
    }
    $("#productlist").html(html);
})

function searchacb(elem) {
    //console.log(elem.id)
    var value = $('#'+elem.id).val()
    console.log(value)

    var html = '';
    for (let i = 0; i < product.length; i++) {
        if(product[i].name.includes(value) ) {
            html += `<div onclick="openproductdeteil(${i})" class="product-item ${product[i].type}">
                        <img class="product-img" src="${product[i].img}"alt="">
                        <p stlye="font-size: 1.2vw;">${product[i].name}</p>
                        <p stlye="font-size: .9vw;">${product[i].price}‡∏ø</p>
                    </div>`; 
        }
    }
    if(html == '') {
        $("#productlist").html(`<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤<\p>`);
    } else {
        $("#productlist").html(html);
    }
    
}

function searchproduct(param) {
    console.log(param)
    $(".product-item").css('display', 'none')
    if(param == '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') {
        $(".product-item").css('display', 'block')
    }
    else {
        $("."+param).css('display', 'block')
    }
}

var productindex = 0;
function openproductdeteil(index) {
    productindex = index;
    console.log(productindex)
    $("#modaldesc").css('display', 'flex')
    $("#mdd-img").attr('src', product[index].img);
    $("#mdd-name").text(product[index].name);
    $("#mdd-price").text((product[index].price)+ ' ‡∏ø');
    $("#mdd-desc").text(product[index].descripion);
}

function closeModal() {
    $(".modal").css('display', 'none')
}

var cart = [];
function addtocart() {
    var pass = true;

    for (let i = 0; i < cart.length; i++){
        if( productindex == cart[i].index ){
            console.log('found same product')
            cart[i].count++;
            pass = false;
        }
    }

    if(pass) {
        var obj = {
            index: productindex,
            id: product[productindex].id,
            name: product[productindex].name,
            price: product[productindex].price,
            img: product[productindex].img,
            count:1
        };
        //console.log(obj)
        cart.push(obj)
    }
    console.log(cart)

    Swal.fire({
        icon: 'success',
        title: '‡πÄ‡∏û‡∏¥‡πà‡∏°' + product[productindex].name + ' ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏£‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ !'
    })
    $("#cartcount").css('display','flex').text(cart.length)
}

function openCart(){
    $('#modalCart').css('display', 'flex')
    rendercart();
}

function rendercart(){
    if(cart.length > 0){
        var html = '';
        for (let i = 0; i < cart.length; i++){
            html += `<div class="cart-item">
                        <div class="cart-left">
                            <img src="${cart[i].img}" alt="">

                            <div class="cartleft-deteail">
                                <p style="font-size: 1.5vw;">${cart[i].name}</p>
                                <p style="font-size: 1.2vw;">${cart[i].price * cart[i].count } ‡∏ø</p>

                            </div>

                        </div>

                        <div class="catr-right">
                            <p onclick="deinitems('-', ${i})" class="btnc">-</p>
                            <p id="countitems${i}" style="margin: 0 20px;">${cart[i].count}</p>
                            <p onclick="deinitems('+', ${i})" class="btnc">+</p>
                        </div>
                    </div>`;
        }
        $("#mycart").html(html)
    }
    else{
        $('#mycart').html(`<p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>`)
    }
}

function deinitems(action, index) {
    if(action == '-') {
        if(cart[index].count > 0) {
            cart[index].count--;
            $("#countitems"+ index).text(cart[index].count)

            if(cart[index].count <= 0) {
                Swal.fire({
                    icon: 'wraning',
                    title: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏¥‡πâ‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏´‡∏°',
                    showConfirmButton: true,
                    showCancelButton: true,
                    showConfirmButton: 'Delete',
                    cancelButtonText: 'Cancel'
                }).then((res) => {
                    if(res.isConfirmed) {
                        cart.splice(index, 1)
                        console.log(cart)
                        rendercart();
                        $("#cartcount").css('display','flex').text(cart.length)
                        if(cart.length <= 0 ) {
                            $("#cartcount").css('display','none')
                        }
                    }
                    else{
                        cart[index].count++;
                        $("#countitems"+index).text(cart[index].count)

                    }
                })
                
            }
        }
    }
    else if(action == '+'){
        cart[index].count++;
        $("#countitems"+index).text(cart[index].count)

    }
    
    
    
}

function buynow() {
    var total = 0; //‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏î
    var last_total = 0; //‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß

    for (let i = 0; i < cart.length; i++) {
        total = cart[i].price * cart[i].count; //‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏£‡∏≤‡∏Ñ‡∏≤x‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏≠‡∏≤‡∏ú‡∏•‡∏•‡∏±‡∏û‡πÑ‡∏õ‡πÄ‡∏ä‡πá‡∏Ñ ‡∏ñ‡πâ‡∏≤ > 1000 ‡∏à‡∏∞‡∏•‡∏î‡πÉ‡∏´‡πâ
        if (total > 1000) { //‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 1000 ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            total *= 0.9; // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡∏•‡∏î 10%
        } 
        last_total += total; //‡πÄ‡∏≠‡∏≤‡∏ú‡∏•‡∏•‡∏±‡∏û‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô last_total
        total = 0; //‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà 
    }


    //‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
    Swal.fire({
        icon: 'info',
        title: 'Total Price',
        text: `Total price: ${last_total.toFixed(2)} ‡∏ø`,
        confirmButtonText: 'Proceed to Checkout'
    }).then((result) => {
        if (result.isConfirmed) {
            cart = [];
            rendercart();
            $("#cartcount").css('display', 'none');
        }
    });
}
